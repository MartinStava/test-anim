/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/

import { useSpring, animated } from "@react-spring/three"
import { useEffect, useState } from "react"
import { Gunslinger } from "./Gunslinger"

export enum State {
  Default,
  Start,
}

export const Character: React.FC<{ target: State }> = ({ target }) => {
  const [deltaX, setDeltaX] = useState(0)
  const [deltaZ, setDeltaZ] = useState(0)

  useEffect(() => {
    if (target === State.Default) {
      return
    }
    start()
  }, [target])

  const start = () => {
    setDeltaX(5)
    setDeltaZ(0)
  }

  const { x, z } = useSpring({
    delay: 0.125 * 0.5 * 1000,
    from: { x: 0, z: 0 },
    to: { x: deltaX, z: deltaZ },
    config: {
      duration: 5.0 * 0.2 * 1000,
    },
  })

  return (
    <animated.group position-x={x} position-z={z}>
      <Gunslinger state={"idle"} />
    </animated.group>
  )
}
